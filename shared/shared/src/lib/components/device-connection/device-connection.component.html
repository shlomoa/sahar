<!-- Connection setup (when not connected) -->
<div *ngIf="connectionStatus === 'disconnected'" class="connection-setup">
  <mat-card>
    <mat-card-header>
      <mat-card-title>ðŸ“º Connect to TV</mat-card-title>
      <mat-card-subtitle>Scan for available devices on your network</mat-card-subtitle>
    </mat-card-header>
    
    <mat-card-content>
      <div *ngIf="discoveredDevices.length === 0 && isScanning" class="scanning">
        <mat-progress-spinner mode="indeterminate" diameter="50"></mat-progress-spinner>
        <p>Scanning for devices...</p>
      </div>
      
      <div *ngIf="discoveredDevices.length > 0" class="device-list">
        <h4>Available Devices:</h4>
        <mat-selection-list #deviceList (selectionChange)="onDeviceSelected($event)">
          <mat-list-option *ngFor="let device of discoveredDevices" [value]="device">
            <mat-icon matListItemIcon>tv</mat-icon>
            <div matListItemTitle>{{ device.deviceName }}</div>
            <div matListItemLine>{{ device.ip }}:{{ device.port }}</div>
          </mat-list-option>
        </mat-selection-list>
      </div>

      <div *ngIf="discoveredDevices.length === 0 && !isScanning" class="no-devices">
        <mat-icon>tv_off</mat-icon>
        <p>No devices found. Make sure your TV is on the same network.</p>
      </div>
    </mat-card-content>
    
    <mat-card-actions>
      <button mat-raised-button color="primary" (click)="onRefreshDevices()" 
              [disabled]="isScanning">
        <mat-icon>refresh</mat-icon>
        {{ isScanning ? 'Scanning...' : 'Refresh' }}
      </button>
    </mat-card-actions>
  </mat-card>
</div>
