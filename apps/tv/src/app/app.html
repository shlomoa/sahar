<!-- TV Application Layout -->
<div class="tv-container">
  <!-- Navigation Bar (10%) -->
  <mat-toolbar color="primary" class="tv-nav-bar">
    <span class="header-title">ðŸ“º SAHAR TV</span>
    <button mat-icon-button (click)="onHomeClick()">
      <mat-icon>home</mat-icon>
    </button>
    <span class="spacer"></span>
    <span class="connection-status">
      {{connectionStatus === 'connected' ? 'ðŸŸ¢ Connected' : 
        connectionStatus === 'connecting' ? 'ðŸŸ¡ Connecting...' : 'ðŸ”´ Disconnected'}}
    </span>
  </mat-toolbar>

  <!-- Main Content Area (80%) -->
  <div class="main-content">    
    @if (bothConnected) {
      <!-- Video Player (when scene selected) -->
      @if (isSceneSelected) {
        <div class="video-player-area" >
          <video-player            
            [playerState]="applicationState.player"
            [currentVideo]="currentVideo()"
            [currentScene]="currentScene()"
            (playerReady)="onPlayerReady()"
            (isPlaying)="onIsPlaying()"
            (videoPaused)="onVideoPaused()"
            (videoEnded)="onVideoEnded()"
            (timeUpdate)="onTimeUpdate($event)">
          </video-player>
        </div>
      } 
      @else {
        <shared-navigation-root
          [level]="currentLevel"
          [performers]="currentPerformers()"
          [videos]="currentVideos()"
          [scenes]="currentScenes()"
          [selectedPerformerId]="currentPerformer()?.id"
          [clientType]="'tv'"
          (back)="onBackClick()"
          (home)="onHomeClick()"
          (selectPerformer)="onPerformerSelected($event)"
          (selectVideo)="onVideoSelected($event)"
          (selectScene)="onSceneSelected($event)">
        </shared-navigation-root>
      }
    } @else {   
      <!-- QR Connection: Show Remote entry URL as QR. Hidden when Remote is connected -->
      <app-qr-connection [remoteUrl]="remoteUrl"></app-qr-connection>
    }
  </div>

  <!-- Status Bar (10%) for debug -->
  <mat-toolbar class="status-bar" color="accent">
    <span>Level: {{ currentLevel }}</span>
    @if (currentPerformer(); as performer) {
      <span class="spacer"></span>
      <span>Performer: {{ performer.name }}</span>
    }
  </mat-toolbar>
</div>

<router-outlet />
