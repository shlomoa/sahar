<div class="remote-container">
  <!-- Header -->
  <mat-toolbar color="primary" class="remote-header">
    <span class="header-title">ðŸ“± SAHAR TV Remote</span>
    <span class="spacer"></span>
    <span class="connection-status">
      {{connectionStatus === 'connected' ? 'ðŸŸ¢ Connected' : 
        connectionStatus === 'connecting' ? 'ðŸŸ¡ Connecting...' : 'ðŸ”´ Disconnected'}}
    </span>
  </mat-toolbar>

  <!-- Device Connection Section (always visible when not connected) -->
  <device-connection
    [connectionStatus]="connectionStatus"
    [discoveredDevices]="discoveredDevices"
    [isScanning]="isScanning"
    (deviceSelected)="connectToDevice($event)"
    (refreshDevices)="startDeviceDiscovery()">
  </device-connection>

  <!-- Navigation Content (only when connected) -->
  @if (connectionStatus === 'connected') {
    <div class="navigation-content">
      
      <!-- Navigation Breadcrumb -->
      <div class="breadcrumb">
        <button mat-button (click)="navigateToPerformers()" 
                [class.active]="currentNavigation.level === 'performers'">
          ðŸ‘¥ Performers
        </button>
        
        @if (currentNavigation.performerId) {
          <span class="separator">â€º</span>
          <button mat-button (click)="navigateToVideos(currentNavigation.performerId!)" 
                  [class.active]="currentNavigation.level === 'videos'">
            ðŸ“¹ Videos
          </button>
        }
        
        @if (currentNavigation.videoId) {
          <span class="separator">â€º</span>
          <button mat-button (click)="navigateToScenes(currentNavigation.performerId!, currentNavigation.videoId!)" 
                  [class.active]="currentNavigation.level === 'scenes'">
            ðŸŽ¬ Scenes
          </button>
        }
        
        @if (currentNavigation.sceneTimestamp) {
          <span class="separator">â€º</span>
          <span class="current-scene">ðŸŽ¯ Scene {{currentNavigation.sceneTimestamp}}</span>
        }
      </div>

      <!-- Component Content Areas -->
      @switch (currentNavigation.level) {
        
        @case ('performers') {
          <performers-grid
            [performers]="performers"
            [selectedPerformerId]="currentNavigation.performerId"
            (performerSelected)="navigateToPerformer($event)">
          </performers-grid>
        }
        
        @case ('videos') {
          <videos-grid
            [videos]="getVideosForPerformer(currentNavigation.performerId!)"
            [selectedVideoId]="currentNavigation.videoId"
            (videoSelected)="navigateToVideo(currentNavigation.performerId!, $event)"
            (backToPerformers)="navigateToPerformers()">
          </videos-grid>
        }
        
        @case ('scenes') {
          <scenes-grid
            [scenes]="getScenesForVideo(currentNavigation.performerId!, currentNavigation.videoId!)"
            [selectedSceneTimestamp]="currentNavigation.sceneTimestamp"
            (sceneSelected)="navigateToScene(currentNavigation.performerId!, currentNavigation.videoId!, $event)"
            (backToVideos)="navigateToVideos(currentNavigation.performerId!)">
          </scenes-grid>
        }
        
        @case ('scene-selected') {
          <video-controls
            [currentVideo]="getCurrentVideo()"
            [currentScene]="getCurrentScene()"
            [sceneTimestamp]="currentNavigation.sceneTimestamp"
            [isPlaying]="isPlaying"
            [isMuted]="isMuted"
            [volumeLevel]="volumeLevel"
            [hasPreviousScene]="hasPreviousScene()"
            [hasNextScene]="hasNextScene()"
            (controlCommand)="sendControlCommand($event)"
            (volumeChange)="onVolumeChange($event)"
            (backToScenes)="navigateToScenes(currentNavigation.performerId!, currentNavigation.videoId!)">
          </video-controls>
        }
      }
    </div>
  }
</div>
