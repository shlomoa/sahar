<!-- Remote Application Layout -->
<div class="remote-container">
  <!-- Navigation Bar (10%) -->
  <mat-toolbar color="primary" class="remote-nav-bar">
    <span class="header-title">ðŸ“± SAHAR TV Remote</span>
    <button mat-icon-button (click)="onHomeClick()">
      <mat-icon>home</mat-icon>
    </button>

    <div class="breadcrumb" *ngIf="navigation$ | async as nav">
      <span *ngFor="let crumb of nav.breadcrumb; let i = index">
        <span *ngIf="i > 0"> > </span>
        <span [class.active]="i === nav.breadcrumb.length - 1">{{ crumb }}</span>
      </span>
    </div>

    <span class="spacer"></span>

    <span class="connection-status">
      {{connectionStatus === 'connected' ? 'ðŸŸ¢ Connected' : 
        connectionStatus === 'connecting' ? 'ðŸŸ¡ Connecting...' : 'ðŸ”´ Disconnected'}}
    </span>

  </mat-toolbar>

  <!-- Main Content Area (80%) -->
  <div class="main-content">
    @if (bothConnected) {
      <div class="navigation-content">
        <div class="content-with-back">
          <shared-back-card
            [enabled]="canGoBack"
            [widthPercent]="15"
            (back)="onBackClick()">
          </shared-back-card>
          <div class="data-view">
            <!-- Component Content Areas -->
            @switch (currentLevel) {
              
              @case ('performers') {
                <shared-performers-grid
                  [performers]="currentPerformers"
                  [selectedPerformerId]="currentPerformer?.id"
                  [clientType]="'remote'"
                  (performerSelected)="navigateToPerformer($event)">
                </shared-performers-grid>
              }
              
              @case ('videos') {
                <shared-videos-grid
                  [videos]="currentVideos"            
                  [clientType]="'remote'"
                  (videoSelected)="navigateToVideo($event)"
                  (backToPerformers)="navigateToPerformers()">
                </shared-videos-grid>
              }
              
              @case ('scenes') {
                <shared-scenes-grid
                  [scenes]="currentScenes"
                  [selectedSceneId]="currentScene?.id"
                  [clientType]="'remote'"
                  (sceneSelected)="navigateToScene($event)"
                  (backToVideos)="navigateToVideo(currentVideo ? currentVideo.id : '')">
                </shared-scenes-grid>
              }
              
              @case ('scene-selected') {
                <video-controls
                  [currentVideo]="getCurrentVideo()"
                  [currentScene]="getCurrentScene()"
                  [sceneId]="currentScene?.id"
                  [isPlaying]="isPlaying"
                  [isMuted]="isMuted"
                  [volumeLevel]="volumeLevel"
                  [hasPreviousScene]="hasPreviousScene()"
                  [hasNextScene]="hasNextScene()"
                  (controlCommand)="sendControlCommand($event)"
                  (volumeChange)="onVolumeChange($event)"
                  (backToScenes)="navigateToScenes(currentVideo?.id ?? '')">
                </video-controls>
              }
            }
          </div>
        </div>
      </div>
    }
  </div>
</div>

<router-outlet />
